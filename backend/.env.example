# OpenGuild Backend Environment Configuration - Example
# Copy this file to .env and configure for your environment

# Database Configuration
# Replace with your PostgreSQL connection string
DATABASE_URL=postgres://username:password@localhost:5432/openguild

# Server Configuration
OPENGUILD_SERVER__HOST=0.0.0.0
OPENGUILD_SERVER__PORT=8080
# Set this to your server's public domain name
OPENGUILD_SERVER__SERVER_NAME=your-server.example.com
OPENGUILD_SERVER__LOG_FORMAT=compact

# Database URL (duplicated for compatibility)
OPENGUILD_SERVER__DATABASE_URL=postgres://username:password@localhost:5432/openguild

# Metrics Configuration
OPENGUILD_SERVER__METRICS__ENABLED=true
OPENGUILD_SERVER__METRICS__BIND_ADDR=0.0.0.0:9100

# Session Configuration
# IMPORTANT: Generate a secure signing key for production using URL-safe base64:
# openssl rand 32 | base64 | tr '+/' '-_' | tr -d '='
# OR: python3 -c "import base64, os; print(base64.urlsafe_b64encode(os.urandom(32)).decode().rstrip('='))"
# This key is used to sign JWT tokens - keep it secret!
OPENGUILD_SERVER__SESSION__SIGNING_KEY=REPLACE_WITH_SECURE_BASE64_KEY

# Messaging Configuration
OPENGUILD_SERVER__MESSAGING__MAX_MESSAGES_PER_USER_PER_WINDOW=60
OPENGUILD_SERVER__MESSAGING__MAX_MESSAGES_PER_IP_PER_WINDOW=200
OPENGUILD_SERVER__MESSAGING__RATE_LIMIT_WINDOW_SECS=60

# MLS Configuration (Message Layer Security)
# Set to true to enable end-to-end encryption
OPENGUILD_SERVER__MLS__ENABLED=false
OPENGUILD_SERVER__MLS__CIPHERSUITE=MLS_128_DHKEMX25519_AES128GCM_SHA256_Ed25519

# Media Storage Configuration (MinIO/S3)
# Configure your object storage endpoint
MEDIA_ENDPOINT=http://localhost:9000
MEDIA_BUCKET=openguild
MEDIA_ACCESS_KEY=your-access-key
MEDIA_SECRET_KEY=your-secret-key

# NATS Configuration (Message Broker)
# Configure your NATS server
NATS_URL=nats://localhost:4222

# Development Tools (adjust for production)
# Reduce log level for production: info,openguild_server=info,openguild=info
RUST_LOG=info,openguild_server=info,openguild=info,sqlx=warn
# Remove or set to 0 for production
RUST_BACKTRACE=0

# Federation Configuration (if using federation)
# Add trusted server configurations as needed
# OPENGUILD_SERVER__FEDERATION__TRUSTED_SERVERS__0__SERVER_NAME=federated-server.example.com
# OPENGUILD_SERVER__FEDERATION__TRUSTED_SERVERS__0__KEY_ID=server-key-id
# OPENGUILD_SERVER__FEDERATION__TRUSTED_SERVERS__0__VERIFYING_KEY=base64-encoded-public-key
